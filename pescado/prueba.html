<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Simulador Calidad del Pescado</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f2f7fb;
      color: #333;
      margin: 20px;
      padding: 0;
    }
    h1, h2 {
      color: #007acc;
      text-align: center;
    }
    .simulador {
      background: white;
      max-width: 700px;
      margin: 0 auto 40px;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    label {
      display: block;
      font-weight: bold;
      margin-bottom: 8px;
    }
    input[type=range] {
      width: 100%;
      margin-bottom: 20px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }
    th, td {
      padding: 12px 10px;
      border: 1px solid #ddd;
      text-align: center;
    }
    th {
      background-color: #007acc;
      color: white;
    }
    .status-normal {
      background-color: #d4edda;
      color: #155724;
      font-weight: bold;
    }
    .status-moderado {
      background-color: #fff3cd;
      color: #856404;
      font-weight: bold;
    }
    .status-critico {
      background-color: #f8d7da;
      color: #721c24;
      font-weight: bold;
    }
    section.composicion {
      background:#fff; 
      padding: 20px; 
      border-radius: 8px; 
      max-width: 700px; 
      margin: 0 auto 40px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    section.composicion table tbody tr:nth-child(even) {
      background: #f9f9f9;
    }
  </style>
</head>
<body>

  <h1>Simulador de Deterioro Químico del Pescado</h1>

  <div class="simulador">
    <label for="dias">Días post-captura: <span id="diasValue">0</span></label>
    <input type="range" id="dias" min="0" max="10" value="0" step="1" />

    <table>
      <thead>
        <tr>
          <th>Parámetro</th>
          <th>Valor</th>
          <th>Estado</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>BVT (mg N/100g)</td>
          <td id="bvtValue">5</td>
          <td id="bvtStatus" class="status-normal">Normal</td>
        </tr>
        <tr>
          <td>Amoniaco (mg)</td>
          <td id="amoniacoValue">2</td>
          <td id="amoniacoStatus" class="status-normal">Normal</td>
        </tr>
        <tr>
          <td>TMA (mg)</td>
          <td id="tmaValue">1</td>
          <td id="tmaStatus" class="status-normal">Normal</td>
        </tr>
        <tr>
          <td>pH</td>
          <td id="phValue">6.8</td>
          <td id="phStatus" class="status-normal">Normal</td>
        </tr>
      </tbody>
    </table>
  </div>

  <section class="composicion">
    <h2>Composición y Parámetros Estables del Pescado</h2>
    <table>
      <thead>
        <tr>
          <th>Parámetro</th>
          <th>Rango o Valor típico</th>
          <th>Comentario</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Composición de agua</td>
          <td>70% - 80%</td>
          <td>Alta, varía según especie y estado (fresco, congelado)</td>
        </tr>
        <tr>
          <td>Proteínas</td>
          <td>15% - 25%</td>
          <td>Proteínas de alta calidad, esenciales para la nutrición</td>
        </tr>
        <tr>
          <td>Lípidos (grasas)</td>
          <td>1% - 15% (hasta 30% en pescados grasos)</td>
          <td>Incluye omega-3, beneficiosos para la salud cardiovascular</td>
        </tr>
        <tr>
          <td>Aminoácidos esenciales</td>
          <td>Ricos en aminoácidos ramificados y cadena larga</td>
          <td>Fundamentales para síntesis proteica en humanos</td>
        </tr>
        <tr>
          <td>Minerales</td>
          <td>Calcio, fósforo, hierro, yodo, magnesio</td>
          <td>Varía según especie</td>
        </tr>
        <tr>
          <td>Ácidos grasos poliinsaturados</td>
          <td>Omega-3 (EPA y DHA)</td>
          <td>Beneficios para la salud cardiovascular y cerebral</td>
        </tr>
        <tr>
          <td>Color</td>
          <td>Blanco, rosado, rojo (según especie)</td>
          <td>Indicador visual de frescura</td>
        </tr>
        <tr>
          <td>Actividad de agua (Aw)</td>
          <td>0.98 - 1.00</td>
          <td>Alta, favorece crecimiento bacteriano si no se conserva bien</td>
        </tr>
        <tr>
          <td>Tamaño y forma</td>
          <td>Variable</td>
          <td>Afecta textura y contenido graso</td>
        </tr>
        <tr>
          <td>Salinidad</td>
          <td>Variable según ambiente</td>
          <td>Influye en sabor y conservación</td>
        </tr>
        <tr>
          <td>Textura</td>
          <td>Firme pero elástica</td>
          <td>Indicador sensorial importante</td>
        </tr>
        <tr>
          <td>Temperatura de conservación</td>
          <td>0°C - 4°C (refrigerado), ≤ -18°C (congelado)</td>
          <td>Clave para evitar deterioro bacteriano</td>
        </tr>
      </tbody>
    </table>
  </section>

  <script>
    const diasInput = document.getElementById('dias');
    const diasValue = document.getElementById('diasValue');

    // Elementos para valores
    const bvtValue = document.getElementById('bvtValue');
    const amoniacoValue = document.getElementById('amoniacoValue');
    const tmaValue = document.getElementById('tmaValue');
    const phValue = document.getElementById('phValue');

    // Elementos para estados
    const bvtStatus = document.getElementById('bvtStatus');
    const amoniacoStatus = document.getElementById('amoniacoStatus');
    const tmaStatus = document.getElementById('tmaStatus');
    const phStatus = document.getElementById('phStatus');

    function getEstado(value, niveles) {
      // niveles = { normal: maxNormal, moderado: maxModerado }
      if (value <= niveles.normal) return 'normal';
      if (value <= niveles.moderado) return 'moderado';
      return 'critico';
    }

    function actualizarSimulador(dias) {
      diasValue.textContent = dias;

      // Cálculos aproximados según días
      // BVT (5 a 40 mg N/100g)
      let bvt = 5 + (35 * dias / 10);
      bvtValue.textContent = bvt.toFixed(1);
      let bvtEstado = getEstado(bvt, {normal: 15, moderado: 30});
      bvtStatus.textContent = bvtEstado.charAt(0).toUpperCase() + bvtEstado.slice(1);
      bvtStatus.className = 'status-' + bvtEstado;

      // Amoniaco (2 a 25 mg, aumenta desde 3-4 días)
      let amoniaco = dias < 3 ? 2 : 2 + (23 * (dias - 3) / 7);
      if (dias < 3) amoniaco = 2;
      else if (dias > 10) amoniaco = 25;
      amoniacoValue.textContent = amoniaco.toFixed(1);
      let amoniacoEstado = getEstado(amoniaco, {normal: 8, moderado: 18});
      amoniacoStatus.textContent = amoniacoEstado.charAt(0).toUpperCase() + amoniacoEstado.slice(1);
      amoniacoStatus.className = 'status-' + amoniacoEstado;

      // TMA (1 a 18 mg, aparece con deterioro avanzado)
      let tma = dias < 2 ? 1 : 1 + (17 * (dias - 2) / 8);
      if (dias > 10) tma = 18;
      tmaValue.textContent = tma.toFixed(1);
      let tmaEstado = getEstado(tma, {normal: 5, moderado: 12});
      tmaStatus.textContent = tmaEstado.charAt(0).toUpperCase() + tmaEstado.slice(1);
      tmaStatus.className = 'status-' + tmaEstado;

      // pH (6.8 a 6.1, disminuye con deterioro)
      let ph = 6.8 - (0.7 * dias / 10);
      if (ph < 6.1) ph = 6.1;
      phValue.textContent = ph.toFixed(2);
      let phEstado = ph >= 6.5 ? 'normal' : (ph >= 6.2 ? 'moderado' : 'critico');
      phStatus.textContent = phEstado.charAt(0).toUpperCase() + phEstado.slice(1);
      phStatus.className = 'status-' + phEstado;
    }

    // Inicializar
    actualizarSimulador(0);

    // Evento slider
    diasInput.addEventListener('input', (e) => {
      actualizarSimulador(parseInt(e.target.value));
    });
  </script>

</body>
</html>
